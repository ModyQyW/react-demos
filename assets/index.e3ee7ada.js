var ge=Object.defineProperty,ye=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ae=(e,s,r)=>s in e?ge(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,q=(e,s)=>{for(var r in s||(s={}))xe.call(s,r)&&ae(e,r,s[r]);if(re)for(var r of re(s))Ce.call(s,r)&&ae(e,r,s[r]);return e},G=(e,s)=>ye(e,be(s));import{r as o,j as t,R as x,o as D,a as v,F as Q,C as E,I as Z,S as X,b as Ie,T as we,c as B,N as Se,d as k,B as P,P as ie,L as le,e as A,u as ve,f as L,g as Y,i as ke,h as Ne,k as Me,l as ce,M as ue,m as $e,n as je,p as Fe,q as Ee,H as Pe,s as Oe}from"./vendor.05ecddf7.js";const Re=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const y of a)if(y.type==="childList")for(const $ of y.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&i($)}).observe(document,{childList:!0,subtree:!0});function r(a){const y={};return a.integrity&&(y.integrity=a.integrity),a.referrerpolicy&&(y.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?y.credentials="include":a.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function i(a){if(a.ep)return;a.ep=!0;const y=r(a);fetch(a.href,y)}};Re();const Te=o.exports.memo(()=>t(x,{children:"WIP"})),_e=o.exports.memo(()=>t(x,{children:"WIP"})),De=o.exports.memo(()=>t(x,{children:"WIP"})),{Link:Le}=B,de={github:"https://api.github.com/search/repositories",gitee:"https://gitee.com/api/v5/search/repositories"},qe=D(de).map(e=>({label:e,value:e})),me=10,ze=(e,s)=>JSON.stringify([e,s]),Ae=o.exports.memo(()=>{var f,S;const e=o.exports.useRef({}),[s,r]=o.exports.useState([]),[i,a]=o.exports.useState(1),[y,$]=o.exports.useState(0),[w,_]=o.exports.useState("github"),[R,d]=o.exports.useState("react"),[u,m]=o.exports.useState(!0),[p,n]=o.exports.useState(null),l=o.exports.useCallback(()=>{m(!0),n(null);const g=ze(w,{keyword:R,page:i});if(e.current[g]){r(e.current[g]),m(!1);return}fetch(`${de[w]}?q=${R}&page=${i}&per_page=${me}`).then(h=>{var j;if(h.ok){const z=(j=h.headers.get("total_count"))!=null?j:"";Number.isNaN(Number.parseInt(z,10))||$(Number.parseInt(z,10))}return h.json()}).then(h=>{var j,z;h.message&&h.documentation_url?(n(new Error(`${h.message} ${h.documentation_url}`)),r([])):(h.total_count&&$(h.total_count),r((j=h.items)!=null?j:h),e.current[g]=(z=h.items)!=null?z:h)}).catch(h=>{n(h),r([])}).finally(()=>{m(!1)})},[R,i,w]),c=g=>{a(g)};return o.exports.useEffect(()=>{l()},[l]),v(Q,{children:[t(x,{justify:"center",children:t(E,{span:24,lg:12,children:t(Z.Search,{addonBefore:t(X,{value:w,onChange:g=>{_(g),a(1)},options:qe}),defaultValue:R,enterButton:!0,onSearch:g=>{d(g)}})})}),t(x,{justify:"center",children:v(E,{span:24,lg:12,children:[!u&&p&&t(Ie,{status:"error",title:(S=(f=p==null?void 0:p.message)!=null?f:p)!=null?S:"Unknown Error"}),t(we,{loading:u,className:"mt-4",dataSource:s,rowKey:"id",size:"small",pagination:{current:i,pageSize:me,total:y,size:"small",position:["topCenter","bottomCenter"],showSizeChanger:!1,onChange:c},columns:[{title:"Name",dataIndex:"full_name",ellipsis:!0,render:(g,h)=>t(Le,{href:h.url,target:"_blank",children:h.full_name})},{title:"Stars",dataIndex:"stargazers_count",width:80},{title:"Forks",dataIndex:"forks_count",width:80}]})]})})]})}),Je=o.exports.memo(()=>t(x,{children:"WIP"})),We=o.exports.memo(()=>t(Se,{to:"mine-sweeper",replace:!0})),pe=(e,s)=>Math.floor(Math.random()*(s-e))+e,b={};b.clear=()=>{Object.keys(b).forEach(e=>{delete b[e],b.length=Object.keys(b).length-6})};b.getItem=e=>{var s;return(s=b[e])!=null?s:null};b.key=e=>{var s,r;return(r=(s=Object.keys(b))==null?void 0:s[e])!=null?r:null};b.removeItem=e=>{delete b[e],b.length=Object.keys(b).length-6};b.setItem=(e,s)=>{b[e]=s,b.length=Object.keys(b).length-6};b.length=0;const M={codeStorage:b,localStorage,sessionStorage},ee="codeStorage",Ke=D(M).map(e=>({label:e,value:e})),te="storage",T="memos",O={done:{order:2,buttonIcon:"ant-design:check-circle-outlined",statusIcon:"ant-design:check-circle-filled",statusIconColor:"#52c41a"},doing:{order:0,buttonIcon:"eos-icons:bubble-loading",statusIcon:"eos-icons:bubble-loading",statusIconColor:"#1890ff"},todo:{order:1,buttonIcon:"ant-design:info-circle-outlined",statusIcon:"ant-design:info-circle-filled",statusIconColor:"#722ed1"}},J=(e,s)=>O[e.status].order-O[s.status].order==0?Number.parseInt(e.id,10)-Number.parseInt(s.id,10):O[e.status].order-O[s.status].order,Ve=k.memo(()=>{const[e,s]=o.exports.useState(()=>{var n,l;return D(M).includes((n=localStorage.getItem(te))!=null?n:ee)&&(l=localStorage.getItem(te))!=null?l:ee}),r=o.exports.useCallback(n=>{s(n),localStorage.setItem(te,n)},[]),[i,a]=o.exports.useState([]);o.exports.useEffect(()=>{var n;try{const l=JSON.parse((n=M[e].getItem(T))!=null?n:"[]");a(l.sort(J))}catch{a([])}},[e]);const[y,$]=o.exports.useState(""),w=o.exports.useCallback(()=>{const n=[...i,{id:`${+Date.now()}${Number.parseInt((Math.random()*1e3).toFixed(0),10)}`,title:y,status:"todo"}].sort(J);a(n),$(""),M[e].setItem(T,JSON.stringify(n))},[i,y,e]),_=o.exports.useCallback(()=>{D(M).forEach(n=>{M[n].setItem(T,JSON.stringify(i))})},[i]),R=o.exports.useCallback(()=>{a([]),D(M).forEach(n=>{M[n].removeItem(T)})},[]),d=o.exports.useCallback(n=>{const l=i.findIndex(f=>f.id===n.id),c=[...i.slice(0,l),G(q({},n),{status:"todo"}),...i.slice(l+1)].sort(J);a(c),M[e].setItem(T,JSON.stringify(c))},[i,e]),u=o.exports.useCallback(n=>{const l=i.findIndex(f=>f.id===n.id),c=[...i.slice(0,l),G(q({},n),{status:"doing"}),...i.slice(l+1)].sort(J);a(c),M[e].setItem(T,JSON.stringify(c))},[i,e]),m=o.exports.useCallback(n=>{const l=i.findIndex(f=>f.id===n.id),c=[...i.slice(0,l),G(q({},n),{status:"done"}),...i.slice(l+1)].sort(J);a(c),M[e].setItem(T,JSON.stringify(c))},[i,e]),p=o.exports.useCallback(n=>{const l=i.findIndex(f=>f.id===n.id),c=[...i.slice(0,l),...i.slice(l+1)];a(c),M[e].setItem(T,JSON.stringify(c))},[i,e]);return v(Q,{children:[t(x,{justify:"center",children:t(E,{span:24,lg:12,children:v(Z.Group,{compact:!0,children:[t(X,{style:{width:"150px"},value:e,onChange:r,options:Ke}),t(Z,{style:{width:"calc(100% - 334px)"},value:y,allowClear:!0,onChange:n=>{$(n.target.value)},onPressEnter:w}),t(P,{type:"primary",style:{width:"60px"},onClick:w,children:"Add"}),t(ie,{title:"Are you sure to sync memos to other storages?",onConfirm:_,children:t(P,{style:{width:"60px"},children:"Sync"})}),t(ie,{title:"Are you sure to clear storages?",onConfirm:R,children:t(P,{style:{width:"64px"},children:"Clear"})})]})})}),t(x,{justify:"center",className:"mt-4",children:t(E,{span:24,lg:12,children:t(le,{bordered:!0,dataSource:i,renderItem:n=>v(le.Item,{className:"flex flex-row",children:[t(A,{className:"flex-none anticon",icon:O[n.status].statusIcon,color:O[n.status].statusIconColor}),t(B.Text,{className:"mx-2 break-all",children:n.title}),t("div",{className:"flex-auto"}),n.status!=="todo"&&t(P,{className:"flex-none",type:"text",shape:"circle",icon:t(A,{className:"mx-auto anticon",icon:O.todo.buttonIcon}),onClick:()=>d(n)}),n.status!=="doing"&&t(P,{className:"flex-none",type:"text",shape:"circle",icon:t(A,{className:"mx-auto anticon",icon:O.doing.buttonIcon}),onClick:()=>u(n)}),n.status!=="done"&&t(P,{className:"flex-none",type:"text",shape:"circle",icon:t(A,{className:"mx-auto anticon",icon:O.done.buttonIcon}),onClick:()=>m(n)}),t(P,{className:"flex-none",type:"text",shape:"circle",icon:t(A,{className:"mx-auto anticon",icon:"ant-design:delete-outlined"}),onClick:()=>p(n)})]},n.id)})})})]})}),{Paragraph:Ge}=B,W=9,ne=24,K=9,se=30,H=10,oe=668,Be=.1,He=.93,V={custom:{difficulty:"custom",rowCount:W,colCount:K,mineCount:H},easy:{difficulty:"easy",rowCount:9,colCount:9,mineCount:10},medium:{difficulty:"medium",rowCount:16,colCount:16,mineCount:40},hard:{difficulty:"hard",rowCount:16,colCount:30,mineCount:99}},Ue=D(V).map(e=>({label:e,value:e})),N={default:"default",playing:"playing",ended:"ended"},C={default:"default",flagged:"flagged",opened:"opened"},I={bomb:"bomb",empty:"empty",number:"number"},Qe=q({},V.easy),Ze=o.exports.memo(()=>{const[e,s]=o.exports.useState(N.default),[r,i]=o.exports.useState([]),a=o.exports.useCallback((d,u)=>{var p,n;const m=r[d][u];if(m.status===C.default)return m.type===I.bomb&&e===N.ended?"\u{1F4A3}":"";if(m.status===C.flagged)return m.type===I.bomb&&e===N.ended?"\u{1F4A3}":"\u26A0\uFE0F";if(m.type===I.bomb)return"\u{1F4A3}";if(m.type===I.number){let l=0;for(let c=d-1;c<=d+1;c+=1)for(let f=u-1;f<=u+1;f+=1)l+=((n=(p=r==null?void 0:r[c])==null?void 0:p[f])==null?void 0:n.type)===I.bomb?1:0;return l}return""},[r,e]),y=o.exports.useCallback((d,u)=>{var m,p,n,l;if(e!==N.ended&&r[d][u].status!==C.opened){s(N.playing);const c=[...r];if(c[d][u].type===I.bomb||c[d][u].type===I.number)c[d][u].type===I.bomb&&s(N.ended),c[d][u].status=C.opened;else{let f=[{row:d,col:u}];for(;f.length>0;){const{row:S,col:g}=f.shift();if(c[S][g].status!==C.opened&&(c[S][g].status=C.opened),c[S][g].type===I.empty){for(let h=S-1;h<=S+1;h+=1)for(let j=g-1;j<=g+1;j+=1)(((p=(m=c==null?void 0:c[h])==null?void 0:m[j])==null?void 0:p.status)===C.default||((l=(n=c==null?void 0:c[h])==null?void 0:n[j])==null?void 0:l.status)===C.flagged)&&f.push({row:h,col:j});f=ve(f,ke)}}}i(c)}},[r,e]),$=o.exports.useCallback((d,u)=>{if(e!==N.ended&&r[d][u].status!==C.opened){s(N.playing);const m=[...r];m[d][u].status=m[d][u].status===C.default?C.flagged:C.default,i(m)}},[r,e]);o.exports.useEffect(()=>{e!==N.ended&&r.length>0&&r.filter(d=>d.some(u=>u.status!==C.opened&&u.type!==I.bomb)).length===0&&s(N.ended)},[r,e]);const[w]=L.useForm(),_=()=>{var p,n;const{rowCount:d,colCount:u,mineCount:m}=w.getFieldsValue();w.setFieldsValue({difficulty:(n=(p=Object.values(V).find(l=>l.rowCount===d&&l.colCount===u&&l.mineCount===m))==null?void 0:p.difficulty)!=null?n:"custom"})},R=async()=>{var l,c;const{rowCount:d,colCount:u,mineCount:m}=w.getFieldsValue(),p=Array.from({length:d}).map(()=>Array.from({length:u}).map(()=>({type:I.empty,status:C.default})));let n=0;for(;n<m;){const f=pe(0,d),S=pe(0,u);if(p[f][S].type!==I.bomb){p[f][S].type=I.bomb;for(let g=f-1;g<=f+1;g+=1)for(let h=S-1;h<=S+1;h+=1)((c=(l=p==null?void 0:p[g])==null?void 0:l[h])==null?void 0:c.type)===I.empty&&(p[g][h].type=I.number);n+=1}}i(p),s(N.default)};return o.exports.useEffect(()=>{w.resetFields()},[]),v(Q,{children:[t(L,{className:"justify-center",form:w,colon:!1,initialValues:Qe,onFinish:R,children:v(x,{gutter:16,children:[t(E,{span:12,lg:5,children:t(L.Item,{name:"difficulty",label:"Difficulty",rules:[{type:"enum",enum:D(V),required:!0,message:"Please select"}],children:t(X,{options:Ue,onChange:d=>w.setFieldsValue(q({},V[d]))})})}),t(E,{span:12,lg:5,children:t(L.Item,{name:"rowCount",label:"Row",rules:[{type:"number",min:W,max:ne,required:!0,message:`Should between ${W} and ${ne}`}],children:t(Y,{min:W,max:ne,onChange:_,precision:0,className:"w-full"})})}),t(E,{span:12,lg:5,children:t(L.Item,{name:"colCount",label:"Column",rules:[{type:"number",min:K,max:se,required:!0,message:`Should between ${K} and ${se}`}],children:t(Y,{min:K,max:se,onChange:_,precision:0,className:"w-full"})})}),t(E,{span:12,lg:5,children:t(L.Item,{name:"mineCount",label:"Mine",validateFirst:!0,rules:[{type:"number",min:H,max:oe,required:!0,message:`Should between ${H} and ${oe}`},({getFieldsValue:d})=>({validator:async(u,m)=>{const{rowCount:p=W,colCount:n=K}=d(),l=m/p/n;return l>=Be&&l<=He?Promise.resolve():Promise.reject(new Error("Unsuitable density"))}})],children:t(Y,{min:H,max:oe,onChange:_,precision:0,className:"w-full"})})}),t(E,{span:24,lg:4,className:"text-center lg:text-left",children:v(L.Item,{children:[t(P,{type:"primary",htmlType:"submit",className:"mr-2",children:"Start"}),t(P,{htmlType:"button",onClick:()=>w.resetFields(),children:"Reset"})]})})]})}),t(x,{className:"flex-col my-4 overflow-x-auto",children:r.map((d,u)=>t(x,{className:"mx-auto flex-nowrap",children:d.map((m,p)=>t("div",{className:`flex justify-center items-center w-5 h-5 m-px transition flex-none ${e===N.ended?"cursor-default":"cursor-pointer"} ${m.status===C.opened&&m.type===I.bomb?"bg-red-300":""} ${m.status===C.opened&&m.type!==I.bomb?"bg-gray-300":""} ${m.status!==C.opened?"bg-gray-400":""}`,role:"button",tabIndex:-1,onClick:n=>{n.preventDefault(),n.stopPropagation(),y(u,p)},onContextMenu:n=>{n.preventDefault(),n.stopPropagation(),$(u,p)},children:a(u,p)},p))},u))}),e===N.ended&&t(Ge,{className:"text-center",children:"Game Over :D"})]})}),Xe=o.exports.memo(()=>t(x,{children:"WIP"})),Ye=o.exports.memo(()=>t(x,{children:"WIP"})),et=o.exports.memo(()=>t(x,{children:"WIP"})),he=[{path:"2048",element:k.createElement(Te)},{path:"dino-swords",element:k.createElement(_e)},{path:"doodle-jump",element:k.createElement(De)},{path:"fetch",element:k.createElement(Ae)},{path:"flippy-bird",element:k.createElement(Je)},{element:k.createElement(We),index:!0},{path:"memo",element:k.createElement(Ve)},{path:"mine-sweeper",element:k.createElement(Ze)},{path:"snake",element:k.createElement(Xe)},{path:"tetris",element:k.createElement(Ye)},{path:"tower",element:k.createElement(et)}],tt="react-demos",nt="0.3.0",st={name:"ModyQyW",email:"wurui7@mail3.sysu.edu.cn",url:"https://modyqyw.github.io"},ot={build:"tsc && vite build --base=/react-demos/",commit:"git-cz",dev:"vite --host",lint:"pnpm run lint:eslint && pnpm run lint:markdownlint && pnpm run lint:stylelint","lint:eslint":"eslint . --fix --ext=.js,.jsx,.ts,.tsx,.vue --ignore-path=.gitignore","lint:markdownlint":"markdownlint . --fix --ignore-path=.gitignore","lint:stylelint":'stylelint "./**/*.{css,less,scss,sass,vue}" --fix --allow-empty-input --ignore-path=.gitignore',prepare:"is-ci || husky install",preview:"vite preview",release:"release-it"},rt={commitizen:{path:"./node_modules/@commitlint/cz-commitlint"}},at={"@iconify/react":"~3.1.0","@modyqyw/utils":"~2.1.1",ahooks:"~3.1.1",antd:"~4.17.4","browser-update":"~3.3.37",react:"~17.0.2","react-dom":"~17.0.2","react-router":"~6.2.1","react-router-dom":"~6.2.1","react-use":"~17.3.1"},it={"@babel/core":"~7.16.5","@babel/eslint-parser":"~7.16.5","@commitlint/cli":"~16.0.0","@modyqyw/fabric":"~4.6.0","@types/browser-update":"~3.3.0","@types/react":"~17.0.38","@types/react-dom":"~17.0.11","@typescript-eslint/eslint-plugin":"~5.8.0","@typescript-eslint/parser":"~5.8.0","@vitejs/plugin-react":"~1.1.3",commitizen:"~4.2.4",eslint:"~8.5.0",husky:"~7.0.4","is-ci":"~3.0.1","lint-staged":"~12.1.4","markdownlint-cli":"~0.30.0","postcss-preset-env":"~7.1.0",prettier:"~2.5.1","release-it":"~14.11.8",stylelint:"~14.2.0",tailwindcss:"~3.0.7","type-fest":"~2.8.0",typescript:"~4.5.4",vite:"~2.7.7","vite-plugin-compression":"~0.3.6","vite-plugin-env-compatible":"~1.1.1","vite-plugin-eslint":"~1.3.0","vite-plugin-pages":"~0.19.7","vite-plugin-stylelint":"~1.1.0","vite-tsconfig-paths":"~3.3.17"};var F={name:tt,version:nt,private:!0,author:st,scripts:ot,config:rt,dependencies:at,devDependencies:it};const{Header:lt,Content:ct,Footer:ut}=ce,{Title:dt,Link:U}=B,fe=he.filter(e=>!e.index).map(e=>{var s;return(s=e==null?void 0:e.path)!=null?s:""}),mt=o.exports.memo(({children:e})=>{const s=Ne(),r=Me(),i=o.exports.useMemo(()=>fe.filter(a=>`/${a}`===s.pathname),[s]);return v(ce,{className:"min-h-screen",children:[t(lt,{className:"fixed z-10 w-full",style:{padding:"0 12px"},children:v(x,{align:"middle",className:"h-full flex-nowrap",children:[t(dt,{level:5,className:"!text-white !mb-0 mx-4 flex-none",children:F.name}),t(ue,{theme:"dark",mode:"horizontal",className:"flex-auto",selectedKeys:i,onClick:({key:a})=>{r(`/${a}`)},children:fe.map(a=>t(ue.Item,{children:a},a))})]})}),t(ct,{style:{marginTop:64,padding:12},children:e}),v(ut,{children:[v(x,{justify:"center",children:["v",F.version]}),t(x,{justify:"center",children:v($e,{size:"large",children:[t(U,{href:`https://github.com/${F.author.name}/${F.name}`,target:"_blank",children:"Github Repo"}),t(U,{href:`https://gitee.com/${F.author.name}/${F.name}`,target:"_blank",children:"Gitee Repo"}),t(U,{href:`https://${F.author.name}.github.io/${F.name}/`,target:"_blank",children:"Github Pages"}),t(U,{href:`https://${F.author.name}.gitee.io/${F.name}/`,target:"_blank",children:"Gitee Pages"})]})})]})]})});je({required:{e:79,f:67,o:50,s:12,c:63},insecure:!0,unsupported:!0});function pt(){return Oe(he)}Fe.render(t(k.StrictMode,{children:t(Ee,{children:t(Pe,{children:t(mt,{children:t(pt,{})})})})}),document.querySelector("#root"));
